#!/bin/bash

DIR=$1

if [[ -d $DIR ]]; then
	cd $DIR
	echo -n "${DIR}: "

	fetch=$(git fetch --all)
	
	if [[ $? ]]; then
		lines=$(echo $fetch | grep -- "->")
		if [[ -z $lines ]]; then
			echo "UP TO DATE"
		else
			echo "UPDATED"
			echo $lines
		fi
	else
		echo "ERROR"
		echo $fetch
	fi

	pull_all=$(git pull --all)
	push_all=$(git push --all origin)

	if [[ $? ]]; then
		lines=$(echo $fetch | grep -- "->")
		if [[ -z $lines ]]; then
			echo "NOTHING TO UPDATE"
		else
			echo "UPDATED"
			echo $lines
		fi
	else
		echo "ERROR"
		echo $push_all
	fi
	
	cd - >/dev/null
fi
